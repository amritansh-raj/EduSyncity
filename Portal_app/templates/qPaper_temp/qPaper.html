<div class="container-fluid h-100">
  <div class="container pt-3 h-100">
    <div class="col h-100">
      <div
        class="row-3 d-flex flex-column justify-content-center align-items-center"
        style="background-color: #252f3e"
      >
        <h1 class="text-center text-white pt-3">KIET Group Of Institutions</h1>
        <h4 class="text-center text-white pt-2 m-0">Subject</h4>

        <div class="d-flex justify-content-between p-3 w-100">
          <div class="input-group p-2 w-25">
            <div class="row d-flex justify-content-start">
              <div class="col-sm-2">
                <label
                  for="staticEmail text-white"
                  class="col-form-label text-white"
                  >M.M.</label
                >
              </div>
              <div class="col-sm-2">
                <input
                  type="text"
                  readonly
                  class="form-control-plaintext text-white"
                  id="staticEmail"
                  value="{{maxMarks}}"
                />
              </div>
            </div>
          </div>
          <div class="input-group my-2 w-50">
            <label class="input-group-text" for="courses">Exam</label>
            <select
              class="form-select criteria-btn"
              ng-change="getExam(selectedExam)"
              ng-model="selectedExam"
              ng-options="option.pk as option.name for option in exams"
            >
              <option value="" selected>Select Exam</option>
            </select>
          </div>
          <div class="input-group p-2 w-25">
            <div class="row d-flex justify-content-end">
              <div class="col-sm-2">
                <label
                  for="staticEmail text-white"
                  class="col-form-label text-white"
                  >Time</label
                >
              </div>
              <div class="col-sm-5">
                <input
                  type="text"
                  readonly
                  class="form-control-plaintext text-white"
                  id="staticEmail"
                  value="{{hours}} hrs {{min}} min"
                />
              </div>
            </div>
          </div>
        </div>
      </div>
      <div
        class="row-9 h-75 d-flex overflow-auto"
        style="background-color: #252f3e"
      >
        <div class="container d-flex justify-content-center text-white">
          <div class="col h-100 w-100" ng-show="maxMarks">
            <div class="row d-flex flex-row justify-content-around">
              <div
                class="d-flex flex-row justify-content-around"
                ng-show="!subDisplay && !mcqDisplay && !dateDisplay"
              >
                <div class="d-flex justify-content-center">
                  <button
                    type="button"
                    class="btn btn-primary btn-lg"
                    ng-click="toggleSubDisplay()"
                  >
                    Add Subjective question
                  </button>
                </div>
                <div class="d-flex justify-content-center">
                  <button
                    type="button"
                    class="btn btn-primary btn-lg"
                    ng-click="toggleMcqDisplay()"
                  >
                    Add Mcq
                  </button>
                </div>
                <div class="d-flex justify-content-center">
                  <button
                    type="button"
                    class="btn btn-primary btn-lg"
                    ng-click="toggleDateDisplay()"
                  >
                    Add date
                  </button>
                </div>
              </div>
              <div
                class="d-flex flex-row justify-content-around"
                ng-show="subDisplay"
              >
                <form ng-submit="addSubQ()">
                  <input
                    type="text"
                    name="question"
                    id="question"
                    class="form-control"
                    ng-model="question"
                    placeholder="Q."
                    required
                  />
                  <input
                    type="number"
                    name="marks"
                    id="marks"
                    class="form-control"
                    ng-model="marks"
                    placeholder="Max marks"
                    min="1"
                    required
                  />
                  <button type="submit" class="btn btn-primary">Add</button>
                  <button
                    type="submit"
                    class="btn btn-primary"
                    ng-click="toggleSubDisplay()"
                  >
                    Cancel
                  </button>
                </form>
              </div>
              <div
                class="d-flex flex-row justify-content-around"
                ng-show="mcqDisplay"
              >
                <form ng-submit="addMcqQ()">
                  <input
                    type="text"
                    name="question"
                    id="question"
                    class="form-control"
                    ng-model="question"
                    placeholder="Q."
                    required
                  />
                  <input
                    type="number"
                    name="marks"
                    id="marks"
                    class="form-control"
                    ng-model="marks"
                    placeholder="Max marks"
                    min="1"
                    required
                  />
                  <button type="submit" class="btn btn-primary">Add</button>
                  <button
                    type="submit"
                    class="btn btn-primary"
                    ng-click="toggleMcqDisplay()"
                  >
                    Cancel
                  </button>
                </form>
                <form ng-submit="addChoice()">
                  <div class="input-group mb-3">
                    <input
                      type="text"
                      class="form-control"
                      placeholder="Choice"
                      name="choice"
                      ng-model="choice"
                      required
                    />
                    <button class="btn btn-outline-secondary" type="submit">
                      Add choice
                    </button>
                  </div>
                </form>
                <ol class="list-group list-group-numbered">
                  <li class="list-group-item" ng-repeat="choice in choices">
                    {{choice.choice}}
                  </li>
                </ol>
              </div>
              <div
                class="d-flex flex-row justify-content-around"
                ng-show="dateDisplay"
              >
                <form ng-submit="addDateTime()">
                  <input
                    type="date"
                    name="date"
                    id="date"
                    class="form-control"
                    ng-model="date"
                    min="{{todaysDate}}"
                    required
                  />
                  <input
                    type="time"
                    name="time"
                    id="time"
                    class="form-control"
                    placeholder="hr:min"
                    ng-model="time"
                    required
                  />
                  <button type="submit" class="btn btn-primary">Add</button>
                  <button
                    type="button"
                    class="btn btn-primary"
                    ng-click="toggleDateDisplay()"
                  >
                    Cancel
                  </button>
                </form>
              </div>
            </div>
            <div class="row" ng-show="questions.length">
              <h3 class="text-center text-white pt-2 mt-4">Added questions</h3>
              <table class="table table-dark table-responsive mt-3">
                <thead>
                  <tr>
                    <th scope="col text-center" style="width: 5%">Index</th>
                    <th scope="col text-center" style="width: 50%">Question</th>
                    <th scope="col text-center" style="width: 10%">
                      Max Marks
                    </th>
                    <th scope="col text-center" style="width: 25%">Choices</th>
                    <th scope="col" style="width: 5%">Edit</th>
                    <th scope="col" style="width: 5%">Del</th>
                  </tr>
                </thead>
                <tbody>
                  <tr ng-repeat="question in questions">
                    <td>{{$index + 1}}</td>
                    <td>{{question.question}}</td>
                    <td>{{question.marks}}</td>
                    <td class="p-0">
                      <table
                        class="table table-dark table-responsive m-0"
                        ng-if="question.type === 'multChoice'"
                      >
                        <tbody>
                          <tr ng-repeat="choice in question.choices">
                            <td scope="col">{{choice.choice}}</td>
                          </tr>
                        </tbody>
                      </table>
                    </td>
                    <td>
                      <button
                        class="btn"
                        type="button"
                        ng-click="openModal(question, $index)"
                        data-bs-toggle="modal"
                        data-bs-target="#editModal"
                      >
                        <i class="bi bi-pencil-square text-white"></i>
                      </button>
                    </td>
                    <td>
                      <button class="btn" type="button" ng-click="delQ($index)">
                        <i class="bi bi-trash text-white"></i>
                      </button>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="row" ng-show="questions.length">
              <div class="d-grid gap-2">
                <button
                  class="btn btn-primary"
                  type="button"
                  ng-click="createExam()"
                >
                  Submit paper
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div
  class="modal fade"
  id="editModal"
  tabindex="-1"
  aria-labelledby="editModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="editModalLabel">Edit question</h1>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <div class="modal-body">
        <form ng-submit="editQ()" id="editFrom">
          <div
            class="input-group mb-3"
            ng-show="selectedOption.type === 'subjective'"
          >
            <span class="input-group-text">Question</span>
            <input
              type="text"
              name="question"
              id="question"
              class="form-control"
              ng-model="selectedQ"
              required
            />
            <span class="input-group-text">Marks</span>
            <input
              type="number"
              name="marks"
              id="marks"
              class="form-control w-25"
              ng-model="selectedM"
              min="1"
              required
            />
          </div>
          <div
            class="input-group mb-3"
            ng-show="selectedOption.type === 'multChoice'"
          >
            <span class="input-group-text"
              ><i class="bi bi-question-circle"></i
            ></span>
            <input
              type="text"
              name="question"
              id="question"
              class="form-control"
              ng-model="selectedQ"
              required
            />
            <span class="input-group-text">@</span>
            <input
              type="number"
              name="marks"
              id="marks"
              class="form-control w-25"
              ng-model="selectedM"
              min="1"
              required
            />
            <div
              class="input-group"
              ng-repeat="choices in selectedOption.choices"
            >
              <input
                type="text"
                name="question"
                id="question"
                class="form-control"
                ng-model="choices.choice"
                required
              />
              <button ng-click="delChoice($index)">Del</button>
            </div>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
          Close
        </button>
        <button
          type="submit"
          class="btn btn-primary"
          form="editFrom"
          data-bs-dismiss="modal"
        >
          Edit
        </button>
      </div>
    </div>
  </div>
</div>
